= CppTest Utility
:toc: macro
:icons: font
:source-highlighter: highlight.js

**CppTest** is a powerful command-line tool for competitive programming. It automates compilation, static analysis, test generation, and stress testing of C++ solutions.

toc::[]

== âœ¨ Features

*   **ğŸ§ª Test Generation:** Automatically compiles `gen.cpp` and generates inputs based on configuration.
*   **ğŸ”¥ Stress Testing:** Flag `-S` runs a brute-force comparison (`main` vs `fast`) on generated tests until it fails.
*   **ğŸ›¡ï¸ Isolation:** By default, tests run in `/tmp/cpptest/tmp`, keeping your project folder clean.
*   **âœ¨ Auto-Fix:** Flag `-F` automatically fixes formatting and linter errors.
*   **ğŸ§¹ Clean Compile:** Flag `-R` removes comments (`//`, `/* */`) before compilation to test a clean version.
*   **ğŸ” Static Analysis:** Integrated `clang-tidy` and `clang-format` checks.
*   **ğŸ¤– Custom Checkers:** Supports `check.cpp` for problems with multiple correct answers.
*   **ğŸ”„ Self-Update:** Flag `-u` updates the tool to the latest version.

== ğŸ“¦ Installation

Copy and paste this one-liner into your terminal to install or update:

[source,bash]
----
rm -rf /tmp/cpptest_inst && git clone --depth=1 https://github.com/MootSasa/CppTest.git /tmp/cpptest_inst && bash /tmp/cpptest_inst/install.sh && rm -rf /tmp/cpptest_inst
----

== ğŸ›  Usage

=== Basic Run
[source,bash]
----
cpptest             # Run in current directory
cpptest main.cpp    # Run specific file
cpptest ./TaskA/    # Run inside folder TaskA
----

=== Generator Support (`gen.cpp`)
If a file named `gen.cpp` exists in the directory, CppTest compiles it and generates `.in` files before running tests.

**Configuration (`tests.cfg`):**
You can control generation by creating a `tests.cfg` file.
Format: `Count Arguments`

[source,text]
----
10 1 100   # Run 10 times: ./gen 1 100
5 500 1000 # Run 5 times: ./gen 500 1000
----

**Default behavior:**
If `tests.cfg` is missing (or if `-G` flag is used), it runs:
`100` tests with arguments `-100 100`.

=== Stress Testing (`-S`)
Requires three files:
1.  `main.cpp` (Your optimized solution)
2.  `fast.cpp` (Brute-force / naive correct solution)
3.  `gen.cpp` (Test generator)

The tool creates a `stress` folder and runs an infinite loop comparing outputs. Press `Ctrl+C` to stop.

== ğŸš© Command Line Flags

[cols="1,4", options="header"]
|===
| Flag | Description

| `-S`, `--stress`
| **Stress Mode.** Runs infinite comparison test between `main` and `fast` using `gen`.

| `-G`, `--no-gen-config`
| Ignore `tests.cfg` and use default generator settings (100 tests, args: -100 100).

| `-i`, `--in-place`
| **In-place mode.** Run tests directly in the source directory (do not copy to `/tmp`). Useful for debugging.

| `-F`, `--fix`
| **Auto-Fix.** Automatically applies `clang-format` and `clang-tidy` fixes to the source file. **Modifies your file!**

| `-R`, `--no-comments`
| **Remove Comments.** Creates a temporary copy of the code, strips all comments, and tests the clean version.

| `-f`, `--fast`
| **Fast mode.** Skip static analysis (linters).

| `-K`, `--force-checker`
| **Force Checker.** Fail if `check.cpp` is missing.

| `-k`, `--force-diff`
| **Force Diff.** Ignore `check.cpp` and use standard `diff` comparison.

| `-u`, `--update`
| **Update.** Downloads the latest version from GitHub and reinstalls.

| `-s`, `--select`
| Select default compiler.
|===

== âš™ï¸ Custom Checkers
If the problem has multiple correct answers, create `check.cpp`.
CppTest runs: `./checker <input> <your_output> <expected_output>`

*   Return **0**: OK
*   Return **non-zero**: WA

== ğŸ—‘ Uninstall
To remove the utility:
[source,bash]
----
uncpptest
----
